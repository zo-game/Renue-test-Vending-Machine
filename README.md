# Renue-test-Vending-Machine
Документация
Данное приложение представляет собой виртуальный вендинговый аппарат, способный выдавать товары за различную стоимость. Для того, чтобы посмотреть цену товара нужно навести мышью на интересующий товар. Чтобы начать им пользоваться необходимо вставить купюру, нажав на имеющийся номинал на панели кошелька клиента. После этого на цифровом дисплее отобразится сумма, на которую можно закупиться или же вернуть деньги, нажав на кнопку "получить сдачу", которая находится на панели справа. Панель справа (Купюры в автомате), так же отображает имеющееся у него количества купюр. Купюры пополняются автоматически, если покупатель вставляет их. Если купюры закончатся - автомат выдаёт сдачу едой. Алгоритм работает так: если сумма сдачи больше самого дорогого товара, записывается количество этого товара, затем выдаётся покупателю. Иначе по отсортированному списку спускаемся на менее дорогой товар и записываем его количество. Если осталась сдача меньшая цены самого дешёвого доступного товара, все равно выдаём один самый дешёвый товар, тем самым происходит округление сдачи в пользу покупателя. Если товаров и купюр нет - выводим всплывающее сообщение, что автомат сдачи не выдаёт. Если нет яблок, которыми выдаётся округлённая сдача, также пишется сообщение о том, что сдача не выдаётся.

Сообщение выводится, при выдаче сдачи покупателю: либо при сдаче только купюрами, либо только банкнотами, либо и тем и тем. Также сообщение выводится при покупке товара, пишется количество купленного товара данного типа и само название товара.

Количество банкнот и количество продуктов генерируется случайно от 0 до 20.
•	Для сборки проекта использовался бандлер vite
•	Для написания кода использовался React + TypeScript
•	Для хранения глобального состояния использовался MobX
•	Для бесплатного хостинга использовался handyHost. Вот URL http://u144593.test-handyhost.ru
•	Для формирования продуктов автомата использовались моковые данные и статичные картинки
•	Также использовался nanoid для генерации случайных id.


Как работает приложение
В ресурсах проект содержит три основные папки: страницы(в нашем случае она у нас одна), компоненты и моковые данные, которые вынесены отдельно, чтобы в случае чего их можно было разово удалить и подключить серверные данные.

В директориях компонентов и страниц, содержатся другие папки с названием элемента. Эти папки содержат внутри себя всё необходимое для реализации данного модуля, в папке которого они находятся: их структура выдержана и изолирована.

В папке страниц находится главная страница, которая содержит в себе три компонента:
1.	ClientInventory – кошелёк клиента, показывающий количество купюр разного номинала(панель слева);

2.	VendingMachineComponent – вендинговый автомат, отображающий все доступные товары их количество, а также количество внесенных купюр(панель по середине);


3.	VendingMachineInventory – инвентарь торгового автомата, показывающий купюры и их количество, которые имеются в распоряжении автомата, а также кнопку выдачи сдачи.

Папка компонентов содержит все эти компоненты и ещё один компонент – PopupMessage, который представляет собой всплывающее окно. Оно появляется при совершении пользователем каких-либо действий: выдача сдачи и покупка предметов. Оно вынесено в отдельный компонент, потому что оно может быть представлено во всех имеющихся компонентах. 
В компоненте ClientInventory содержится всё необходимое для его реализации. Он содержит: папку компонентов, хранилище состояний(store), а также index.ts, для удобства импортирования его файлов. Папка компонентов содержит два элемента: Banknote и ClientInventory. В Banknote реализована вся логика внесения банкнот со стороны клиента, то какие действия происходят после нажатия на купюру. ClientInventory представляет собой контейнер для этих банкнот. Store компонента включает все состояния количества банкнот и методы совершения операций над ними: получение количества, получение количества конкретной купюры и уменьшение количества.

VendingMachineInventory имеет похожую структуру: в нём так же содержится хранилище состояний банкнот, имеется компоненты банкнот и компонент-контейнер этих банкнот. В добавок он имеет кнопку выдачи сдачи, которая содержит логику выдачи сдачи: при нажатии на неё изменяется состояние счётчика внесенных банкнот(изменяется на 0), меняется состояние инвентаря клиента(количество купюр увеличивается, если у автомат может их выдать), меняется состояние инвентаря торгового автомата(количество уменьшается, если оно больше 0), также может измениться состояние количества предметов в торговом автомате, если у торгового автомата нет сдач.
VendingMachine содержит два хранилища состояний: количество внесённых банкнот и количество имеющихся продуктов. Хранилище внесённых банкнот имеет следующие методы:
•	giveChange - выдача сдачи, возврат денег количества и обнуление их счетчика,
•	 increase – увеличение счетчика денег на определённую сумму,
•	 decrease – уменьшение денег на определённую сумму. 
Хранилище состояний продуктов содержит: 
•	состояние денег, которые необходимо конвертировать в продукты, если в автомат не может выдать сдачу купюрами; 
•	состояние-массив всех продуктов;
•	setMoneyToConvert – метод-сеттер для состояние денег для конвертации.
•	decreaseProductCount – уменьшение количества конкретного продукта на 1
•	decreaseProductsCounts – метод уменьшения количества нескольких продуктов.
Компоненты VendingMachine: 
•	DepositedBanknotesComponent - компонент-счётчик для внесенных денег, 
•	Product – компонент продукта
•	ProductPriceUi – компонент, отображающий цену продукта при наведении, внутри он не имеет никакой логики кроме UI
•	VendingMachine – компонент-контейнер для продуктов и счетчика внесенных банкнот







